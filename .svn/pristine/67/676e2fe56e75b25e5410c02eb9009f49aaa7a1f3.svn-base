<template>
  <span>
  <a class="zfbtn" data-toggle="dropdown">
        <div class="down-arrow"></div>
      <div>
        <span
          v-text="SelectedItem ?
          SelectedItem[TextField] :
          this.getSanaTextValue(this.DefaultTextSanaTextKey, this.DefaultText)"
        ></span>
      </div>
        </a>
      <ul class="dropdown-menu dropdown-menu-right">
        <li v-for="(item,index) in DataList" :key="index">
          <a v-on:click="changeSelection(item)">
            {{item[TextField]}}
            <template v-if="item.innerHtml">
              <template v-html="item.innerHtml"></template>
            </template>
          </a>
        </li>
      </ul>
  </span>
</template>

<script>
export default {
  name: "Dropdown",

  props: {
    // options array
    DataList: {
      type: Array,
      required: true
    },
    // default item to be selected
    PreSelecteditem: {
      type: Object,
      required: false
    },
    // if field to bind on drop down
    IdField: {
      type: String,
      required: true
    },
    // text field to bind on drop down
    TextField: {
      type: String,
      required: true
    },
    DefaultText: {
      type: String,
      required: false
    },
    DefaultTextSanaTextKey: {
      type: String,
      required: false
    }
  },

  data() {
    return {
      SelectedItem: {}
    };
  },
  created() {
    this.changeSelection(this.PreSelecteditem, false);
  },
  methods: {
    changeSelection(data, emitEvent = true) {
      this.SelectedItem = data;
      if (emitEvent) {
        this.$emit("onChangeSelection", this.SelectedItem);
      }
    },
    getSanaTextValue(textKey, defaultValue) {
      if (!textKey) {
        return defaultValue || "";
      }
      return this.GetSanaText(textKey, defaultValue);
    }
  }
};
</script>

<style lang="scss" scoped></style>
