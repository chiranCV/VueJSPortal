<template>
  <div class="app-wrapper iooContainer">
    <div class="container">
      <div>
        <router-view/>
        <!--<div class="list-loading-block">
          <span>
            <img class="img-fluid" src="@/assets/loading.gif">
          </span>
        </div>-->
      </div>
    </div>
  </div>
</template>
<script>
import { mapActions } from "vuex";

import {
  FETCH_ALL_SANATEXT,
  FETCH_CURRENT_BASKET,
  FETCH_SITE_SETTINGS,
  FETCH_ALL_CUSTOMER_ACCOUNT,
  FETCH_DISABLE_DATE
} from "./store/action-types";
import AuthHelper from "./helpers/authentication-helper";

export default {
  name: "app",
  // Life sycle hooks.
  created() {
    AuthHelper.createShopStatusCookie();
    AuthHelper.requestApitoken().then((token) => {
      console.log("token", token);
      this.fetchsitesettings();
      this.fetchsanatext();
      this.fetchCurentBaket();
      this.fetchAllCurentAccount();
      this.fetchDisableDates();
    });
  },

  methods: {
    ...mapActions("content", {
      fetchsanatext: FETCH_ALL_SANATEXT,
      fetchsitesettings: FETCH_SITE_SETTINGS,
      fetchDisableDates: FETCH_DISABLE_DATE
    }),
    ...mapActions("basket", {
      fetchCurentBaket: FETCH_CURRENT_BASKET
    }),
    ...mapActions("customer", {
      fetchAccountResult: FETCH_ALL_CUSTOMER_ACCOUNT
    }),
    fetchAllCurentAccount() {
      this.IsDataLaoding = true;
      this.fetchAccountResult("ajithonly").then((data) => {
        this.IsSerching = false;
        return data;
      });
    }
  },
  computed: {
    showLoadingDialog() {
      return this.$store.state.isLoading;
    }
  }
};
</script>
<style lang="scss">
</style>
