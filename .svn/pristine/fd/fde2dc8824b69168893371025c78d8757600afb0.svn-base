<template>
  <div class="last-viewed-block">
    <div class="ioo-mt-40 mb-4 ioo-mb-40">
      <div class="d-flex flex-row">
        <div class="p-2 pr-10 ioo-mr-10">
          <h4 class="font-bold">Last Viewed Products</h4>
        </div>
        <div class="p-2 ioo-mt-7">
          <a class="ml-2" href>View all</a>
        </div>
        <div class="p-2 ioo-mt-7">
          <a class="ml-2" href>Clear</a>
        </div>
      </div>
    </div>
    <div class="caresoul-grid-container">
      <sana-carosel v-bind:listSize="lastViewedModel.length">
        <div
          class="grid-carousel--card col-4"
          v-for="(item,index) in lastViewedModel"
          v-bind:key="index"
        >
          <div class="grid-border">
            <div class="product-img">
              <img class="img-fluid" src="@/assets/lg-thumb-img.jpg">
            </div>
            <div class="product-info">
              <div class="row">
                <div class="col-7">
                  <!-- eslint-disable max-len -->
                  <a>
                    <h6 class="product-title">Clutch Actuation System</h6>
                  </a>
                  <span>3311 302 029 01</span>
                  <span class="list-dropdown-text float-right">
                    <a class="zfbtn" data-toggle="dropdown">
                      <span class="down-arrow"></span>
                      <div>
                        <span>Reman</span>
                      </div>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-right">
                      <li>
                        <a>Reman</a>
                      </li>
                      <li>
                        <a>Reman</a>
                      </li>
                      <li>
                        <a>Reman</a>
                      </li>
                    </ul>
                  </span>
                  <span>Cross Reference:SD80015</span>
                  <button class="ioo-btn ioo-btn-default ioo-sm-btn no-edge">Check Inventory</button>
                </div>
                <div class="col-5">
                  <p class="product-price text-right">&#8364; 584,40</p>
                  <div class="auro-increment-input text-right">
                    <input type="number" name="quantity" min="1" max="5">
                  </div>
                </div>
              </div>
              <div class="btn-block row clearfix text-center">
                <div class="col-5 float-left pl-0 ioo-mw-100 ioo-dk-pr-0">
                  <button class="ioo-btn ioo-btn-default">Details</button>
                </div>
                <div class="col-7 float-left pr-0 ioo-mw-100 ioo-dk-pl-0">
                  <button class="ioo-btn ioo-btn-primary float-right">
                    <span class="btn-inner">
                      <span class="btn-text">Add to basket</span>
                      <span class="btn-cart-white"></span>
                    </span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </sana-carosel>
    </div>
  </div>
</template>

<script>
import { mapActions, mapState } from "vuex";
import carosel from "./ui/Carousel.vue";
import { FETCH_LASTVIEWED_ITEMS } from "../../store/action-types";

export default {
  name: "LastViewed",
  components: {
    "sana-carosel": carosel
  },
  created() {
    this.isLoading = true;
    this.fetchLastViewedItems.then(() => {
      this.isLoading = false;
      this.lastViewedModel = this.lastViewedItems;
    });
  },
  data() {
    return {
      lastViewedModel: [{ name: "Salt and Straw", tag: "Ice cream" }]
    };
  },
  methods: {
    ...mapActions("lastViewedItems", {
      fetchLastViewedItems: FETCH_LASTVIEWED_ITEMS
    }),
    onQuantityChange(qty) {
      this.quantity = qty;
    },
    onProductTypeChangeSelection(val) {
      this.selectedProductTypeId = val.Id;
      this.selectedProductTypeTitle = val.Title;
    }
  },
  computed: {
    ...mapState("lastViewedItems", {
      // eslint-disable-next-line no-trailing-spaces
      lastViewedModel: state =>
        // eslint-disable-next-line indent
        state.lastViewedItems
    })
  }
};
</script>
